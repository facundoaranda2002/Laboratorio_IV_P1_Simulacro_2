import{a as E,b,c as k,d as I,e as w,g as q,h as F,l as U,m as x,n as N}from"./chunk-BNXNQ3EU.js";import{A as j,D as T,x as V}from"./chunk-NAK6CJAR.js";import{a as z}from"./chunk-KBHTHLET.js";import{c as p}from"./chunk-VOVRNMR7.js";import"./chunk-MMJEDWD7.js";import{Aa as c,Ja as v,La as m,Na as n,Oa as a,Pa as d,Ra as f,V as L,Ya as l,_ as h,ab as C,d as M,da as S,f as s,sb as _,za as u}from"./chunk-O6UQK4GM.js";var g=class{};var D=M(z());var B=(()=>{let t=class t{constructor(o,i){this.router=o,this.firestore=i,this.listaUsuarios=[]}traerUsuariosBase(){return s(this,null,function*(){(yield T(j(this.firestore,"usuarios"))).forEach(i=>{let e=i.data();this.listaUsuarios.push(e)})})}obtenerUsuario(o){let i=!1;return this.listaUsuarios.forEach(e=>{e.usuario===o.usuario&&e.clave===o.clave&&(localStorage.setItem("user",JSON.stringify(e)),i=!0)}),i}logout(){return s(this,null,function*(){localStorage.removeItem("user"),this.router.navigate(["login"],{replaceUrl:!0})})}};t.\u0275fac=function(i){return new(i||t)(h(p),h(V))},t.\u0275prov=L({token:t,factory:t.\u0275fac,providedIn:"root"});let r=t;return r})();function P(r,t){r&1&&(n(0,"label",12),l(1," Usuario es requerido "),a())}function R(r,t){r&1&&(n(0,"div",12),l(1," Clave es requerido "),a())}var $=(()=>{let t=class t{constructor(o,i,e){this.formBuilder=o,this.router=i,this.usuarioService=e,this.usuario=new g,this.formLogin=this.formBuilder.group({usuario:["",[b.required]],clave:["",[b.required]]})}ngOnInit(){return s(this,null,function*(){yield this.usuarioService.traerUsuariosBase()})}ingresar(){this.usuario.usuario=this.formLogin.value.usuario?this.formLogin.value.usuario:"",this.usuario.clave=this.formLogin.value.clave?this.formLogin.value.clave:"",this.usuarioService.obtenerUsuario(this.usuario)?this.router.navigate(["home"],{replaceUrl:!0}):D.default.fire({icon:"error",title:"Error",text:"Usuario no autorizado",heightAuto:!1})}admin(){this.formLogin.get("usuario")?.setValue("admin"),this.formLogin.get("clave")?.setValue("admin")}empleado(){this.formLogin.get("usuario")?.setValue("empleado"),this.formLogin.get("clave")?.setValue("empleado")}};t.\u0275fac=function(i){return new(i||t)(c(x),c(p),c(B))},t.\u0275cmp=S({type:t,selectors:[["app-login"]],standalone:!0,features:[C],decls:21,vars:4,consts:[[1,"text-center"],[1,"form-signin",3,"formGroup"],[1,"h3","mb-3","font-weight-normal"],["for","inputEmail",1,"sr-only"],["type","email","id","inputEmail","placeholder","Correo","required","","autofocus","","formControlName","usuario","name","usuario",1,"form-control"],["style","color: red;",4,"ngIf"],["for","inputPassword",1,"sr-only"],["type","password","id","inputPassword","placeholder","Contrase\xF1a","required","","formControlName","clave","name","clave",1,"form-control"],["type","submit",1,"btn","btn-lg","btn-primary","btn-block",3,"click","disabled"],["type","submit",1,"btn","btn-lg","btn-secondary","btn-block",3,"click"],["type","submit",1,"btn","btn-lg","btn-warning","btn-block",3,"click"],[1,"mt-5","mb-3","text-muted"],[2,"color","red"]],template:function(i,e){i&1&&(n(0,"body",0)(1,"form",1)(2,"h1",2),l(3,"Login"),a(),n(4,"label",3),l(5,"Correo"),a(),d(6,"input",4),v(7,P,2,0,"label",5),n(8,"label",6),l(9,"Contrase\xF1a"),a(),d(10,"input",7),v(11,R,2,0,"div",5),d(12,"br"),n(13,"button",8),f("click",function(){return e.ingresar()}),l(14,"Ingresar"),a(),n(15,"button",9),f("click",function(){return e.admin()}),l(16,"Admin"),a(),n(17,"button",10),f("click",function(){return e.empleado()}),l(18,"Empleado"),a(),n(19,"p",11),l(20,"\xA9 2024"),a()()()),i&2&&(u(),m("formGroup",e.formLogin),u(6),m("ngIf",(e.formLogin.controls.usuario.errors==null?null:e.formLogin.controls.usuario.errors.required)&&e.formLogin.controls.usuario.touched),u(4),m("ngIf",(e.formLogin.controls.clave.errors==null?null:e.formLogin.controls.clave.errors.required)&&e.formLogin.controls.clave.touched),u(2),m("disabled",e.formLogin.invalid))},dependencies:[_,N,w,E,k,I,U,q,F],styles:[".bd-placeholder-img[_ngcontent-%COMP%]{font-size:1.125rem;text-anchor:middle;-webkit-user-select:none;-moz-user-select:none;user-select:none}@media (min-width: 768px){.bd-placeholder-img-lg[_ngcontent-%COMP%]{font-size:3.5rem}}"]});let r=t;return r})();export{$ as LoginComponent};
